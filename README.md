在百度地图开放平台（https://lbsyun.baidu.com/）申请坐标转换APIKey（AK），获取由数字和字母组成的代码。
控制台-应用管理-我的应用-创建应用；静态图服务需要申请，一般比较好通过。
创建完成后，会有一个访问应用（AK）的一串代码，复制代码

#打开Collect_Baidu_SVs.py，在第57行粘贴代码

#第119行，fovy=85为图像焦距调整到85；width=800&height=400为图像长、宽

#第135行，为.shp文件的路径，将sampling_points.shp替换为你的文件名（shp文件为采样点数据，处理方法阅读“OSM数据处理”）

#第137行，为街景图片的保存路径

百度街景图象每日每账号的坐标转换免费额度为5000，即5000个点
如需快速获取街景数据，可以申请多个百度AK

每个点对应于四个不同方向的图像，例如“2016_550_F.JPG”、“2016_550_B.JPG”、“2016_550_L.JPG”和“2016_550_R.JPG”。需要注意的是，并非所有采样点都有可用的SV。当采样点没有可用的SV时，输出将为“There is no street view available at this location”。

1.百度地图API静态图申请
1.1注册百度地图开放平台账号，百度开放平台网址：https://lbsyun.baidu.com/
1.2静态图服务API Key（AK）申请：控制台-应用管理-我的应用-创建应用；静态图服务需要申请。创建完成后，会有一个访问应用（AK）的一串代码
注：每个API单日限额坐标转换次数5000、静态图点数5000（每个点上可获取多个街景算：不同时间、不同方向），如果需要快速获取街景，可选择付费or申请多个API key。
2.获取街景：在该页面中，根据自己的需要设置街景的参数：焦距、图像质量、俯仰角、宽度、高度；街景年份：所有年份街景、最近年份街景，因每个点不一定有不同时间的街景，建议选择“所有年份街景”；街景方向：道路前后左右四个方向可供选择；添加API Key：输入从百度地图开发者平台申请的一串代码（AK)。
3.道路方向计算：用户输入线段.shp文件，软件根据文件中线段的两点计算道路的方向，作为街景图像的方向。
4.街景文件处理：
4.1删除街景文件夹中的无效街景：在获取完成街景图象后，在文件夹中可能有一些损坏街景图象，可以对无效的街景图象进行删除。
4.2统计获取街景：如需要统计获取街景图象的情况，可以输入获取的街景文件夹、获取街景所依据的.shp文件获取，软件会计算统计 获取情况并写入.csv文件中。
5.点.shp文件制作：软件根据点.shp文件的坐标获取街景图象，用户需根据自己的需要选择点并输出为.shp文件。文件需要满足的条件字段：DIREC、F84X、F84Y、pointID，这些字段数据类型要求为：”双精度”。”DIREC”:方向；”F84X”、”F84Y”:点1的xy坐标；”pointID”点的ID名称，可以将地理位置设置为pointID。
5.1选点文件制作方法可参考案例：
①从OSM网站(https://www.openstreetmap.org/)免费下载研究区域的道路数据。根据需求下载的行政区掩膜数据。
②使用GIS软件打开OSM数据，可以使用ArcGIS、QGIS等。根据掩膜，裁剪OSM道路。
③根据需求选择获取街景的道路：打开OSM的属性表-按属性选择-字段fclass选择道路类型，导出线数据。
④从第③步导出的数据按间隔生成点，根据需求选择生成点的距离，并导出点数据。
⑤对第③步导出的线数据采取”按转折点打断”，并将生成的数据导出。
⑥将第⑤步导出的线数据输入软件”道路方向计算”页面中，计算后输出带有道路方向”DIREC”的线数据（此时线数据”DIREC”字段的类型为”文本”）。
⑦将第⑥步导出的线数据”DIREC”字段赋值到第④步导出的点数据中，可在GIS软件中采用”相交”等方法。将生成的数据导出导出
⑧将第⑦步导出的点数据新建字段：F84X、F84Y、pointID，数据类型：双精度，”DIREC”字段数据类型改为：双精度。右键F84X-计算几何，属性选择质心x坐标，同理F84Y。右键pointID-计算字段,pointID=!OBJECTID!、pointID=!FID!，或者将pointID改为名称点的坐标，将生成的数据导出。

##注意！！##在属性表的字段名称中不能有中文
##注意！！##F84X、F84Y、pointID、”DIREC”字段数据类型为：双精度

ZY
